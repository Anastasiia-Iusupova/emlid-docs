## Correction output

<p style="text-align:center"><img src="../img/reachview/base_mode/base-mode.png" style="width: 800px;"/></p>

Reach {{model}} outputs correction in industry standard RTCM3 format. Correction data can be sent via Serial, TCP, NTRIP{%if model == 'Module'%}.{%else%} or LoRa.{%endif%} {%if model == 'M+' or model == 'M2' %}Please note, for Reach {{model}} the external LoRa module is required.{%endif%} 

### Serial
Serial port connection is available through several hardware connection options. All of them support the following baud rates: 9600, 19200, 38400, 57600, 115200{% if model == "RS2"%}, 230400.{% else %}.{%endif%}

#### UART
{%if model == 'Module' or model == 'M+' or model == 'M2' %}Corresponds to TTL UART on Reach {{model}}.{%else%}Corresponds to RS232 port on Reach {{model}} extension connector.{%endif%} Common way to connect to radio to send correction data.

#### USB-to-PC
When connected over USB to a PC Reach {{model}} will show up as several devices, one of them will be a serial port. You can use this serial port to send correction data to the PC.

#### USB OTG
Use a micro-USB OTG cable to connect USB accessories. In this mode only USB devices that emulate a serial port could be used. Example of popular chips that are supported: FT232, CP2102. There are numerous devices built on these chips that will provide you a TTL UART or RS232 port.

### NTRIP
NTRIP is industry standard way of transferring GNSS corrections over Internet, with ReachView you can use any public service or your own private caster. NTRIP does not support point-to-point communication e.g. you can not use it to transfer corrections from one Reach to another directly. In NTRIP terminology there are servers, clients and caster. Server sends correction to a caster and clients can receive them by connecting to that caster.

In order to send correction to NTRIP caster you need to know: 

- IP address or domain name of the caster
- Port
- Username
- Password
- Mount point

When connecting via NTRIP in base mode Reach acts as a NTRIP server.

### TCP
Typical scenario for using TCP is sending correction data to an application on the same network or to a server with public IP. 

!!! note ""
    Ports below 3000 are reserved for internal use only.  

TCP supports two roles:

#### Server
You need to specify port and after that clients will be able to connect to this device on it’s IP address. Many clients can be connected to the same server.
#### Client
You need to specify IP address of the server and port number.

If ReachView does not allow to set a certain port number it means that it is reserved for internal use.
{%if model == 'M+' or model == 'M2'or model == 'RS2' or model == 'RS/RS+'%}
### LoRa Radio
{%if model == 'M+' or model == 'M2' %}The external LoRa radio can be connected to the Reach {{model}} via S2 port. {%else%}Reach {{model}} has internal LoRa radio which is used for receiving or sending corrections.{%endif%} The radio works only in one way, it could either be configured to send corrections (on base) or to receive them (on rover). Using LoRa modulation it is possible [to hit up to 19km (11.8 miles)](https://emlid.com/lora-radio-hits-19-km-baseline/) in line of sight or a few km in urban areas with just 20 dBm power output. As long as frequency and air rate settings match an unlimited number of rovers can listen for correction from the same base.

The lower the air rate, the longer the working distance will be. Depending on your RTCM3 messages selection ReachView will automatically block insufficient air rates. Disable correction messages or reduce rate in order to unlock lower air rates. Air rate on transmitting Reach and on receiving must match.

Make sure to select appropriate output power and frequency according to your local regulations.

{%else%}

{%endif%}
### Bluetooth
You can use Bluetooth for correction output. Note that you can’t set both position output and base correction output to Bluetooth at the same time.

## RTCM3 messages
{%if model == 'Module' or model == 'M+' or model == 'RS/RS+' %}
<p style="text-align:center"><img src="../img/reachview/base_mode/single-rtcm3.png" style="width: 800px;"/></p>
{%else%}
<p style="text-align:center"><img src="../img/reachview/base_mode/multi-rtcm3.png" style="width: 800px;"/></p>{%endif%}
The minimal subset that is required for RTK to function is {%if model == 'Module' or model == 'M+' or model == 'RS/RS+' %}1002{%else%}1074{%endif%} message for 1Hz with GPS observations and 1006 message for 0.1Hz with base station antenna position. Enabling more messages or higher rates requires higher connection bandwidth.

In the Data rate row you can find an estimation of bytes/sec for 1 satellite when messages are configured at 1 Hz.

{%if model == 'Module' or model == 'M+' or model == 'RS/RS+' %}
|RTCM3 messages|Message type|Data rate, bytes/sec (1 satellite, 1Hz)|
|:---:|:---:|:---:|
||**Minimal required messages**||
|1002|GPS L1 observations      |10.39|
|1006|ARP station coordinate   | 27|
||**Optional messages for other GNSS **||
|1010|GLONASS L1 observation|11.3|
|1097|GALILEO MSM|21.5|
|1107|SBAS MSM|37.5|
|1117|QZSS MSM|42|
|1127|BeiDou MSM|17.78|
{%else%}
|RTCM3 messages|Message type|Data rate, bytes/sec (1 satellite, 1Hz)|
|:---:|:---:|:---:|
||**Minimal required messages**||
|1006|ARP station coordinate   | 27|
|1074|GPS MSM4  | 19.38 |
||**Optional messages for other GNSS **||
|1084|GLONASS MSM4| 19.38 |
|1094|Galileo MSM4| 9.58 |
|1124|BeiDou MSM4| 18.9 |
{%endif%}

Here is some information about each message from RTCM STANDARD 10403.3<sup>[1](#myfootnote1)</sup>:

- **Message Type 1006** provides the earth-centered, earth-fixed (ECEF) coordinates of the antenna reference point (ARP) for a stationary reference station and the height of the ARP above a survey monument. It is the mandatory message to turn on.

{%if model == 'Module' or model == 'M+' or model == 'RS/RS+' %}
- **Message Type 1002 and 1010** contain L1 RTK GPS and GLONASS raw satellite data respectively. GPS 1002 message is mandatory to use due to RTKLIB code. You could turn on GLONASS 1010 message if you want to use this GNSS.

- **Messages 1097 (GALILEO), 1107 (SBAS), 1117 (QZSS), 1127 (BeiDou)** are MSM7 (Multiple Signal Messages). MSM7 are high precision messages which contains a complete set of RINEX observations with extended resolution. That means that you should turn on only one message of choosen system to get all data about it.
{%else%}

- **Messages 1074 (GPS), 1084(GLONASS), 1094 (Galileo), 1124 (BeiDou)** are MSM4 (Multiple Signal Messages). MSM4 are high precision messages which contain a complete set of RINEX observations with extended resolution. That means that you should turn on only one message of the choosen system to get all data about it. It is recommended to keep enabled at least GPS 1074 message.{%endif%}

!!! tip ""
	Remember that you can not use GLONASS and BeiDou systems together.

{%if model == 'Module' or model == 'M+' or model == 'RS/RS+' %}
!!! tip ""
	* Use 1117 QZSS message if you are located in East-Southeast Asia and Australia.
	* Use 1107 SBAS message if you are located in Noth America, Europe, North Africa, Near East, South Asia, and East Asia, Russia
	* Use 1127 BeiDou message if you are located in Asian region and Australia.
{%endif%}

## Base position

!!! tip ""
    [Check the Placing the base guide](https://docs.emlid.com/reachrs2/common/tutorials/placing-the-base/) to learn about different ways to set up your base. 
	
<p style="text-align:center"><img src="../img/reachview/base_mode/base-coordinates.png" style="width: 800px;"/></p>

There are two main options how to specify base station position. Note that RTK positioning is relative to the base station, so any inaccuracy in it’s position will result in a constant shift of rover coordinates. For many applications it is not critical and averaged single coordinate of the base could be used. If your application requires absolute accuracy for rover position an accurate  base coordinate must be entered.

### Manual
In this mode you supply an a priori known coordinate by locating the unit above surveyed point. Coordinate has to be supplied in ECEF XYZ or in WGS84 Latitude and Longitude and WGS84 ellipsoid height. Antenna height offset is entered at this stage as well, offset is limited to 6.5535 m (21.5 feet) by the RTCM message.

You can change position format in the top right corner of Base coordinates frame.

<p style="text-align:center"><img src="../img/reachview/base_mode/manual-coordinates.png" style="width: 800px;"/></p>

### Average 
By default Reach {{model}} will average base position every time it starts. This feature significantly simplifies initial setup in a new location, however it will not provide an accurate absolute coordinate.

ReachView has a unique feature that allows it to determine base station position while working as a rover from another base. This is done by obtaining RTK Fixed solution, averaging it over a period of time and this way obtaining an accurate position for the base. A typical scenario would involve setting up a local base station by determining its coordinate from NTRIP and then broadcasting correction locally, thus reducing the baseline for rovers and improving positioning performance.

If the reference station is too far away it is possible to average float and still improve the accuracy of the position.

In case no correction is available when setting up base or absolute accuracy is not required averaged single coordinates could be used.

**Save averaged position to manual**  
After you have successfully obtained averaged position you might want to save it for future use. Click on the “save coordinates” icon and position will be saved as if it was entered in manual mode. Now every time Reach {{model}} starts it will broadcast this position in correction messages.

**Repeat averaging**  
If you would like to restart base position averaging process you can click on “repeat averaging” icon.This is especially useful in a situation when you accidentally moved Reach {{model}} during averaging.

<p style="font-size:70%;"><a name="myfootnote1">1</a>: Radio Technical Commission for Maritime Services. 2016. RTCM STANDARD 10403.3 DIFFERENTIAL GNSS (GLOBAL NAVIGATION SATELLITE SYSTEMS) SERVICES – VERSION 3. Virginia: Radio Technical Commission for Maritime Services, pp. 108-262</p>

